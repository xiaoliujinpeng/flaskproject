# 正则表达式

### 特殊字符含义

##### 基本字符

| 特殊字符  | 含义                                                         |
| --------- | ------------------------------------------------------------ |
| [.......] | 表示字符集合，匹配这里面的任意字符，例如[abc]匹配a、b或c，若在开头加个^，则表示除了这里面的都匹配，例如,\[^abc\]表示匹配a、b、c之外的任意字符，一些特殊子符 . * + 在里面也会变成普通字符 |
| \d        | 匹配一个数字,相当于[0-9]                                     |
| \D        | 匹配一个非数字字符，相当于\[^0-9\]                           |
| \s        | 匹配一个空白字符,相当于[\t\n\f\r\v]                          |
| \S        | 匹配一个非空白字符,相当于\[^\t\n\f\r\v\]                     |
| \w        | 表示匹配字母数字,相当于[a-zA-Z0-9]                           |
| \W        | 表示匹配非字母数字,相当于\[^a-zA-Z0-9\]                      |
| .         | 匹配任意字符处了换行                                         |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |

上面的特殊字符都可以在字符集合[]中表示，如[\s\w]表示匹配一个空白字符和数字

------

##### 重复字符

*，+，？默认都是贪婪模式，即尽可能多的匹配字符，在后面加个？可取消贪婪模式，如,\*?  +?   ??,会尽可能少的匹配字符

| 特殊字符 | 含义                                                         |
| -------- | ------------------------------------------------------------ |
| *        | 匹配0次或多次，例如ab*c会匹配ac,abc,abbc...，默认是贪婪模式,[点击此处详解](https://docs.python.org/3.8/howto/regex.html?highlight=regex) |
| +        | 匹配1次或多次，默认是贪婪模式                                |
| ？       | 匹配0次或一次，默认是贪婪模式                                |
| {m,n}    | 至少匹配m次，最多匹配n次，如果不写m则默认最少匹配零次，如果不些n则默认最多匹配无限多次,默认是贪婪模式，关闭贪婪模式在后面几个?即可 |
| {m}      | 指定匹配次数为m                                              |
|          |                                                              |
|          |                                                              |
|          |                                                              |
|          |                                                              |

------

##### 其他特殊字符

| 特殊字符 | 含义                                                         |
| -------- | ------------------------------------------------------------ |
| \|       | 表示 或，用于连接两个正则表达式，例如 [a-z]\|[0-9], 15\|32,   \|的优先级较低 |
| ^        | 匹配行 的开头，在 MULTILINE的模式下，也会匹配换行符后面的字符 |
| $        | 匹配一行的结尾，同样在MULTILINE的模式下，会匹配换行符前的字符 |
| \A       | 匹配字符串的开头，在MULTILINE的模式下也不受影响              |
| \Z       | 匹配字符串的结尾，在MULTILINE的模式下也不受影响              |
| \b       | 匹配单词的边界，例如re.compile(r"\bclass\b")  可以匹配 "you not class you"但是不能匹配"younotclass you" |
| \B       | 与\b相反，只有不是单词边界才匹配。                           |

##### 反斜杠

在python字符串中\用于转义，所以要表达一个反斜杠字符，需要这样写"\\\\",而正则表达式中\也用于转义，所以要在python字符串中应用正则表达式的字符串需要这样表示"\\\\\\\\",这样表示不太容易理解，还有更方便的表示方法，使用python的原生字符串，在字符串前加r,  例如r"\\\\",在python字符串中就表示"\\\\",将其传入正则表达式的模式中，则会匹配"\\"。

------



### 使用正则表达式

##### 编译正则表达式

```
import re
r=re.complie(pattern,flags=0)
将一个正则表达式模式编译成正则表达式对象，编译成python对象后可以使用match(),serach()等方法

```

##### 匹配正则表达式

```
常用的方法

flags是匹配模式(解释在下一小节)
re.match(pattern,string,flags=0)
匹配字符串的开头，如果匹配到则返回一个match对象，没有匹配到则返回None

re.search(pattern,string.flags=0)
匹配整个字符串，如果匹配到则返回一个match对象，否则返回None

在多行模式下，search匹配换行之后的开头，而match不会,例如
re.match("^7","a23\n456\n789",re.MULTILINE)
>>None
re.search("^7","a23\n456\n789",re.MULTILINE)
>><re.Match object; span=(8, 9), match='7'>


re.findall(pattern,string,flags=0)
匹配整个字符串，返回符合匹配的子字符串的列表

re.findfilter(patter,string,flags=0)
功能同findall一样，只不过返回的是迭代器

```

##### Flags

flags让你选择让正则表达式如何工作，下面是一些flags

多个flag可以一起用，中间用 | 连接

| flag         | 含义                                                         |
| ------------ | ------------------------------------------------------------ |
| ASCII,A      | 让一些特殊转义字符，像\w,\b,\s和\d只匹配ASCII字符            |
| DOTALL,S     | 让 **.** 能匹配任何字符，包括换行符                          |
| IGNORECASE,I | 忽略大小写                                                   |
| LOCALE,L     | 做本地匹配，用于适配不同语言                                 |
| MULTILINE,M  | 多行匹配，这会影响  ^和$的作用                               |
| VERBOSE,X    | 使用详细的正则表达式，这更清楚和容易被理解，使用这个模式后，空格会被忽略 |



------

##### match对象

```
match对象常用的一些方法

group()    返回匹配到的字符串

start()    返回匹配的字符串的起始位置

end()		返回匹配到的字符串的末位置

span()		返回一个包含起始位置和末位置的元组
```

