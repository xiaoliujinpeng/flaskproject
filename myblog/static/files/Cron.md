# Cron

与at相似循环执行的例程是由cron(crond)这个系统服务来控制的

当用户使用crontab创建了一个例程之后，该工作会被记录到/var/spool/cron当中去

cron执行的每项工作都会记录到/var/log/cron这个文件中

##### 权限管理

/etc/cron.allow存放使用者的账号，若不在其中则不可使用crontab

/etc/cron.deny存放使用者的账号,若在其中则不可使用crontab

cron.allow的优先级大于cron.deny



##### 基本语法

```
crontab [-u username] [-l|-e|-r]
-u    只有root 才能进行这个任务，即帮其他使用者建立或移除crontab工作例程
-e 	  编辑crontab的工作内容
-l    查阅crontab的工作内容
-r	  移除所有crontab的工作内容，若仅移除一项，请用-e去编辑

编辑命令里面由六个字段，每个字段的含义分别如下
```

| 分钟 | 小时 | 日期 | 月份 | 周                  | 指令    |
| ---- | ---- | ---- | ---- | ------------------- | ------- |
| 0-59 | 0-23 | 1-31 | 1-12 | 0-7(0和7都代表周日) | command |

```
特殊字符
```

| *       | 代表任何时刻到接受的意思                                     |
| ------- | ------------------------------------------------------------ |
| ，      | 代表分隔时段的意思，例如<br />0 3,6 * * * command<br />第二栏的3，6代表3和6都适合 |
| -       | 代表一定时间范围内，例如<br />0 3-6 * * * command<br />第二栏的3-6代表3 4 5 6都适用的意思 |
| /number | 表示每隔number单位的意思,例如<br />*/5 * * * * commad<br />表示每隔5分钟执行一次 |
|         |                                                              |

##### 配置文件

/etc/crontab

这个文件主要配置系统及的循环例程，用法和普通用户的一样

其中的PATH字段是执行文件的搜索路径

MAILTO字段是指如果例程的结果由错误或者输出时，要将其发送给谁

默认是MAILTO=root

------

/etc/cron.d

此目录下主要放置crontab的配置文件脚本

此目录下有个0hourly文件，格式同/etc/crontab相似，但其自带有一段例程，即

```
01 * * * * root run-parts /etc/cron.hourly
```

每小时的第一分钟执行这段命令，而run-parts会在五分钟内的某个随机时间执行/etc/cron.hourly里的脚本文件(里面是必须能够被执行的脚本文件)

因此如果想要设置每小时执行的命令，可以直接链接到/etc/cron.hourly里的脚本文件。